<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìŠ¤ì½”ì–´ ì…ë ¥</title>
<style>
    body {
        font-family: sans-serif;
        margin: 0;
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    .input-panel {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        width: 90%; /* Adjust width for better mobile fit */
        max-width: 400px; /* Maximum width to prevent excessive stretching on larger screens */
    }

    h3 {
        text-align: center;
        color: #333;
        margin-bottom: 10px; /* Reduced margin-bottom to bring sections closer */
    }

    .section {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #555;
    }

    input[type="text"] {
        width: calc(100% - 12px);
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
        box-sizing: border-box;
        font-size: 16px;
    }

    .team-inputs input[type="text"] {
        width: calc(100% - 12px); /* Make team inputs full width */
        margin-right: 0; /* Remove right margin */
    }

    .button-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        flex-wrap: wrap;
    }

    .button-group button {
        padding: 10px 15px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 4px;
        border: 1px solid #ccc;
        background-color: #eee;
    }

    .score-controls {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .score-label {
        font-weight: bold;
        min-width: 60px;
        text-align: right;
        margin-right: 3px;
    }

    .score-controls span[id^="score"] {
        font-weight: bold;
        font-size: 1.2em;
        min-width: 30px;
        text-align: center;
        padding: 8px 10px;
        background-color: #e9e9e9;
        border-radius: 4px;
        display: inline-block;
    }

    .checkbox-group {
        display: flex; /* Display checkboxes inline */
        align-items: center;
        gap: 10px;
    }

    .checkbox-group label {
        display: inline-flex;
        align-items: center;
        margin-bottom: 0; /* Remove default margin */
        cursor: pointer;
        font-weight: normal; /* Reset label font weight */
    }

    .checkbox-group label input[type="checkbox"] {
        width: 24px; /* Increase checkbox size */
        height: 24px;
        margin-right: 5px;
    }

    .status-alert {
        animation: flash 0.4s ease-in-out 2;
    }

    @keyframes flash {
        0%, 100% { background-color: transparent; }
        50% { background-color: yellow; }
    }

    #ball_status, #strike_status, #out_status, #inning_status {
        margin-top: 10px;
        font-weight: bold;
        padding: 10px;
        background-color: #e9e9e9;
        border-radius: 4px;
        text-align: center;
    }

    #out_status span {
        display: inline-block;
        width: 16px;
        height: 16px;
        margin: 0 5px;
        border-radius: 50%;
        vertical-align: middle;
        background-color: #ccc; /* Default color for out dots */
    }

    #out_status span.active {
        background-color: red; /* Active out dot color */
    }

    .ball-count-buttons {
        display: flex;
        flex-wrap: nowrap;
        align-items: center; /* í•„ìš”ì— ë”°ë¼ ì¶”ê°€ */
    }

    .ball-count-buttons button {
        flex-grow: 1; /* ê° ë²„íŠ¼ì´ ê°€ëŠ¥í•œ ê³µê°„ì„ ê· ë“±í•˜ê²Œ ì°¨ì§€í•˜ë„ë¡ */
        min-width: 40px; /* ìµœì†Œ ë„ˆë¹„ ì„¤ì • (ì¡°ì • í•„ìš”) */
        padding: 8px; /* íŒ¨ë”© ê°ì†Œ */
        font-size: 14px; /* í°íŠ¸ í¬ê¸° ê°ì†Œ */
    }

    .ball-count-buttons span {
        margin-left: 10px; /* ë²„íŠ¼ ê·¸ë£¹ê³¼ ì¹´ìš´íŠ¸ ì‚¬ì´ ê°„ê²© */
        font-weight: bold;
    }
</style>
<div class="input-panel">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <h3>ìŠ¤ì½”ì–´ ì…ë ¥</h3>
        <button id="reset-all">ì „ì²´ ë¦¬ì…‹</button>
    </div>
    <div class="section">
        <label>ì ìˆ˜ ì¡°ì •</label>
        <div class="button-group">
            <div class="score-controls">
                <input type="text" id="team1" class="score-label" value="íŒ€1" placeholder="íŒ€1 ì´ë¦„" style="text-align: right; width: 80px;">:
                <button id="btn-score1-minus">-</button>
                <span id="score1">0</span>
                <button id="btn-score1-plus">+</button>
            </div>
            <div class="score-controls">
                <input type="text" id="team2" class="score-label" value="íŒ€2" placeholder="íŒ€2 ì´ë¦„" style="text-align: right; width: 80px;">:
                <button id="btn-score2-minus">-</button>
                <span id="score2">0</span>
                <button id="btn-score2-plus">+</button>
            </div>
        </div>
        <button id="reset-score">ì ìˆ˜ ë¦¬ì…‹</button>
    </div>
    <div class="section">
        <label>ë³¼ì¹´ìš´íŠ¸ <span id="ball_display">(B:0 S:0 O:0)</span></label>
        <div class="button-group ball-count-buttons">
            <button id="btn-ball-minus">B -</button>
            <button id="btn-ball-plus">B +</button>
            <button id="btn-strike-minus">S -</button>
            <button id="btn-strike-plus">S +</button>
            <button id="btn-out-minus">O -</button>
            <button id="btn-out-plus">O +</button>
        </div>
        <button id="reset-counts">ì¹´ìš´íŠ¸ ë¦¬ì…‹</button>
    </div>
    <div class="section">
        <label>ì£¼ë£¨ìƒí™©</label>
        <div class="checkbox-group">
            <label><input id="base1" type="checkbox"/> 1ë£¨</label>
            <label><input id="base2" type="checkbox"/> 2ë£¨</label>
            <label><input id="base3" type="checkbox"/> 3ë£¨</label>
        </div>
        <button id="reset-bases">ì£¼ë£¨ ë¦¬ì…‹</button>
    </div>
    <div class="section">
        <label>ì´ë‹</label>
        <div class="button-group">
            <button id="btn-inning-minus">-</button><span id="inning_display">1íšŒì´ˆ</span><button id="btn-inning-plus">+</button>
        </div>
        <button id="reset-inning">ì´ë‹ ë¦¬ì…‹</button>
    </div>
</div>
<script>
    let ws;
    let isWsConnected = false; // ì›¹ì†Œì¼“ ì—°ê²° ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜

    // --- ìƒíƒœ ë³€ìˆ˜ ---
    let ballCount = 0;
    let strikeCount = 0;
    let outCount = 0;
    let inningNum = 1;
    let isTop = true; // true: ì´ˆ, false: ë§

    // --- ì›¹ì†Œì¼“ ì—°ê²° ë° í•¨ìˆ˜ ---
    function connectWebSocket() {
        ws = new WebSocket("ws://" + location.hostname + ":8765");

        ws.onopen = () => {
            console.log("âœ… WebSocket ì—°ê²°ë¨");
            isWsConnected = true; // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸
            sendInitialState(); // ì›¹ì†Œì¼“ ì—°ê²° í›„ ì´ˆê¸° ìƒíƒœ ì „ì†¡
            resetAllAfterConnection(); // ì—°ê²° í›„ ì „ì²´ ë¦¬ì…‹ ìˆ˜í–‰
        };

        ws.onmessage = (event) => {
            // ì…ë ¥ í˜ì´ì§€ì´ë¯€ë¡œ ìˆ˜ì‹  ë©”ì‹œì§€ ì²˜ë¦¬ ì•ˆ í•¨
        };

        ws.onerror = (error) => {
            console.error("âŒ WebSocket ì˜¤ë¥˜:", error);
        };

        ws.onclose = () => {
            console.log("ğŸ”Œ WebSocket ì—°ê²° ëŠê¹€. 5ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...");
            isWsConnected = false; // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸
            setTimeout(connectWebSocket, 5000);
        };
    }

    function send(type, value) {
        if (ws && ws.readyState === WebSocket.OPEN) {
            const data = { type, value };
            console.log("ğŸ“¤ ì „ì†¡:", data); // ë¡œê·¸ ì¶”ê°€
            ws.send(JSON.stringify(data));
        } else {
            console.warn("WebSocketì´ ì—°ê²°ë˜ì§€ ì•Šì•„ ì „ì†¡ ì‹¤íŒ¨:", { type, value });
        }
    }

    // --- UI ì—…ë°ì´íŠ¸ ë° ë°ì´í„° ì „ì†¡ í•¨ìˆ˜ ---

    function flashElement(element) {
        if (element) {
            element.classList.add("status-alert");
            setTimeout(() => element.classList.remove("status-alert"), 400);
        }
    }

    function adjustScore(teamId, delta) {
        const el = document.getElementById(teamId);
        if (!el) return;
        let current = parseInt(el.textContent || "0", 10);
        const updated = Math.max(0, current + delta);
        el.textContent = updated.toString();
        send(teamId, updated);
    }

    function updateBallDisplay() {
        const el = document.getElementById("ball_display");
        if (el) {
            el.textContent = `(B:${ballCount} S:${strikeCount} O:${outCount})`;
            flashElement(el);
        }
        // send("ball", ballCount); // ì´ˆê¸° UI ì—…ë°ì´íŠ¸ ì‹œì—ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    }

    function updateStrikeDisplay() {
        const el = document.getElementById("ball_display");
        if (el) {
            el.textContent = `(B:${ballCount} S:${strikeCount} O:${outCount})`;
            flashElement(el);
        }
        // send('strike', strikeCount); // ì´ˆê¸° UI ì—…ë°ì´íŠ¸ ì‹œì—ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    }

    function updateOutDisplay() {
        const el = document.getElementById("ball_display");
        if (el) {
            el.textContent = `(B:${ballCount} S:${strikeCount} O:${outCount})`;
            flashElement(el);
        }
        // send('out', outCount); // ì´ˆê¸° UI ì—…ë°ì´íŠ¸ ì‹œì—ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    }

    function updateInningDisplay() {
        console.log(`updateInningDisplay í˜¸ì¶œë¨: inningNum=${inningNum}, isTop=${isTop}`); // ë¡œê·¸ ì¶”ê°€
        const el = document.getElementById('inning_display');
        const inningString = `${inningNum}íšŒ${isTop ? 'ì´ˆ' : 'ë§'}`;
        if (el) {
            console.log(`ì´ë‹ í‘œì‹œ ì—…ë°ì´íŠ¸: ${inningString}`); // ë¡œê·¸ ì¶”ê°€
            el.textContent = inningString;
            flashElement(el);
        } else {
            console.error("Error: 'inning_display' ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."); // ì˜¤ë¥˜ ë¡œê·¸ ì¶”ê°€
        }
        // send('inning', inningString); // ì´ˆê¸° UI ì—…ë°ì´íŠ¸ ì‹œì—ëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ
    }

    function updateBaseDisplay(baseId, isChecked) {
        send(baseId, isChecked);
    }

    // --- ì¹´ìš´íŠ¸ ë° ì´ë‹ ë³€ê²½ ë¡œì§ ---

    function resetCounts() {
        ballCount = 0;
        strikeCount = 0;
        updateBallDisplay(); // ì¹´ìš´íŠ¸ ë¦¬ì…‹ ì‹œ í‘œì‹œ ì—…ë°ì´íŠ¸
        updateStrikeDisplay(); // ìŠ¤íŠ¸ë¼ì´í¬ë„ ëª…ì‹œì ìœ¼ë¡œ ì—…ë°ì´íŠ¸
    }

    function handleStrikeOut() {
        console.log("ì‚¼ì§„!");
        outCount++;
        resetCounts(); // B/S ë¦¬ì…‹ í¬í•¨
        updateOutDisplay(); // ì•„ì›ƒ ì—…ë°ì´íŠ¸ ë° ì „ì²´ í‘œì‹œ ì—…ë°ì´íŠ¸
        updateStrikeDisplay(); // ìŠ¤íŠ¸ë¼ì´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
        updateBallDisplay();   // ë³¼ í‘œì‹œ ì—…ë°ì´íŠ¸
        send("ball", ballCount); // ì¶”ê°€: ë³¼ ì¹´ìš´íŠ¸ 0 ì „ì†¡
        send("strike", strikeCount); // ì¶”ê°€: ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ 0 ì „ì†¡
        checkThreeOuts();
    }

    function handleWalk() {
        console.log("ë³¼ë„·!");
        resetCounts(); // B/S ë¦¬ì…‹ í¬í•¨
        updateBallDisplay(); // ì „ì²´ í‘œì‹œ ì—…ë°ì´íŠ¸
    }

    function checkThreeOuts() {
        if (outCount >= 3) {
            console.log("ì“°ë¦¬ ì•„ì›ƒ! ê³µìˆ˜êµëŒ€.");
            changeInning(true);
            outCount = 0;
            resetCounts();
            send("ball", ballCount);
            send("strike", strikeCount);
            send("out", outCount); // ì¶”ê°€: ì•„ì›ƒ ì¹´ìš´íŠ¸ 0 ì „ì†¡
            clearBases(); // clearBases í•¨ìˆ˜ í˜¸ì¶œ
            updateOutDisplay(); // ì•„ì›ƒ ì—…ë°ì´íŠ¸ ë° ì „ì²´ í‘œì‹œ ì—…ë°ì´íŠ¸
            updateInningDisplay(); // ì´ë‹ í‘œì‹œ ì—…ë°ì´íŠ¸ ì¶”ê°€
        }
    }

    // --- ì´ë‹ ë³€ê²½ í•¨ìˆ˜ (ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€, ê³µìˆ˜êµëŒ€ íŒŒë¼ë¯¸í„° ì¶”ê°€) ---
    function changeInning(isTurnChange = false) { // ê³µìˆ˜êµëŒ€ ì—¬ë¶€ íŒŒë¼ë¯¸í„° ì¶”ê°€
        console.log("changeInning í˜¸ì¶œë¨", isTurnChange ? "(ê³µìˆ˜êµëŒ€)" : ""); // ë¡œê·¸ ì¶”ê°€
        if (isTop) { // ì´ˆ -> ë§
            isTop = false;
            console.log("ì´ë‹ ë³€ê²½: ì´ˆ -> ë§");
        } else { // ë§ -> ë‹¤ìŒ íšŒ ì´ˆ
            isTop = true;
            inningNum++;
            console.log(`ì´ë‹ ë³€ê²½: ë§ -> ${inningNum}íšŒ ì´ˆ`);
        }
        updateInningDisplay();
        send("inning", `${inningNum}íšŒ${isTop ? 'ì´ˆ' : 'ë§'}`); // ì´ ì¤„ ì¶”ê°€
    }

    function previousInning() {
        console.log("previousInning í˜¸ì¶œë¨"); // ë¡œê·¸ ì¶”ê°€
        if (isTop) { // ì´ˆ -> ì´ì „ íšŒ ë§
            if (inningNum > 1) {
                inningNum--;
                isTop = false;
                console.log(`ì´ë‹ ë³€ê²½: ì´ˆ -> ${inningNum}íšŒ ë§`);
                updateInningDisplay();
                send("inning", `${inningNum}íšŒ${isTop ? 'ì´ˆ' : 'ë§'}`); // ì´ ì¤„ ì¶”ê°€
            } else {
                console.log("1íšŒì´ˆ ì´ì „ìœ¼ë¡œ ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return; // ë³€ê²½ ì—†ìŒ
            }
        } else { // ë§ -> í˜„ì¬ íšŒ ì´ˆ
            isTop = true;
            console.log("ì´ë‹ ë³€ê²½: ë§ -> ì´ˆ");
            updateInningDisplay();
            send("inning", `${inningNum}íšŒ${isTop ? 'ì´ˆ' : 'ë§'}`); // ì´ ì¤„ ì¶”ê°€
        }
    }

    // --- ì´ˆê¸° ìƒíƒœ ì „ì†¡ í•¨ìˆ˜ ---
    function sendInitialState() {
        if (isWsConnected) {
            console.log("ì´ˆê¸° ìƒíƒœ ì „ì†¡ ì¤‘...");
            const team1Name = document.getElementById("team1")?.value || "íŒ€1";
            const team2Name = document.getElementById("team2")?.value || "íŒ€2";
            send("team1", team1Name);
            send("team2", team2Name);
            send("score1", parseInt(document.getElementById("score1")?.textContent || "0", 10));
            send("score2", parseInt(document.getElementById("score2")?.textContent || "0", 10));
            send("ball", ballCount);
            send("strike", strikeCount);
            send("out", outCount);
            updateInningDisplay();
            send("base1", document.getElementById("base1")?.checked || false);
            send("base2", document.getElementById("base2")?.checked || false);
            send("base3", document.getElementById("base3")?.checked || false);
        } else {
            console.warn("WebSocketì´ ì•„ì§ ì—°ê²°ë˜ì§€ ì•Šì•„ ì´ˆê¸° ìƒíƒœ ì „ì†¡ ì‹¤íŒ¨.");
        }
    }

    function clearBases() {
        document.getElementById('base1').checked = false;
        document.getElementById('base2').checked = false;
        document.getElementById('base3').checked = false;
        updateBaseDisplay('base1', false);
        updateBaseDisplay('base2', false);
        updateBaseDisplay('base3', false);
    }

    function resetAll() {
        console.log("ì „ì²´ ë¦¬ì…‹ ë²„íŠ¼ í´ë¦­ë¨!"); // Debugging line

        if (isWsConnected) { // ì›¹ì†Œì¼“ ì—°ê²° ìƒíƒœ í™•ì¸
            // íŒ€ëª… ë¦¬ì…‹
            const team1Input = document.getElementById("team1");
            const team2Input = document.getElementById("team2");
            if (team1Input) team1Input.value = "íŒ€1";
            if (team2Input) team2Input.value = "íŒ€2";
            send("team1", "íŒ€1");
            send("team2", "íŒ€2");

            // ì ìˆ˜ ë¦¬ì…‹
            adjustScore("score1", -parseInt(document.getElementById("score1")?.textContent || "0", 10));
            adjustScore("score2", -parseInt(document.getElementById("score2")?.textContent || "0", 10));

            // ë³¼ì¹´ìš´íŠ¸ ë¦¬ì…‹
            ballCount = 0;
            strikeCount = 0;
            outCount = 0;
            updateBallDisplay();
            updateStrikeDisplay();
            updateOutDisplay();

            // ì´ë‹ ë¦¬ì…‹
            inningNum = 1;
            isTop = true;
            updateInningDisplay();

            // ì£¼ë£¨ìƒí™© ë¦¬ì…‹
            clearBases(); // clearBases í•¨ìˆ˜ í˜¸ì¶œ

            console.log("ì „ì²´ ë¦¬ì…‹ ì™„ë£Œ");
            sendInitialState(); // ì „ì²´ ìƒíƒœë¥¼ ë‹¤ì‹œ ì „ì†¡
        } else {
            console.warn("WebSocket ì—°ê²°ì´ ì•„ì§ ë˜ì§€ ì•Šì•„ ì „ì²´ ë¦¬ì…‹ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    function resetAllAfterConnection() {
        console.log("ì›¹ì†Œì¼“ ì—°ê²° í›„ ì „ì²´ ë¦¬ì…‹ ìˆ˜í–‰");
        resetAll();
    }


    // --- DOM ë¡œë“œ í›„ ì‹¤í–‰ ---
    window.addEventListener("DOMContentLoaded", () => {
        connectWebSocket(); // ì›¹ì†Œì¼“ ì—°ê²° ì‹œì‘

        // ì´ˆê¸° UI ì—…ë°ì´íŠ¸ (0, 1íšŒì´ˆ ë“±)
        updateBallDisplay();
        updateStrikeDisplay();
        updateOutDisplay();
        updateInningDisplay(); // ì´ˆê¸° ì´ë‹ í‘œì‹œ ì„¤ì •

        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° ---

        // íŒ€ëª… (ìƒˆë¡œìš´ ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€)
        document.getElementById("team1")?.addEventListener("input", (e) => send("team1", e.target.value));
        document.getElementById("team2")?.addEventListener("input", (e) => send("team2", e.target.value));

        // ì ìˆ˜
        document.getElementById("btn-score1-minus")?.addEventListener("click", () => adjustScore("score1", -1));
        document.getElementById("btn-score1-plus")?.addEventListener("click", () => adjustScore("score1", 1));
        document.getElementById("btn-score2-minus")?.addEventListener("click", () => adjustScore("score2", -1));
        document.getElementById("btn-score2-plus")?.addEventListener("click", () => adjustScore("score2", 1));
        document.getElementById("reset-score")?.addEventListener("click", () => {
            adjustScore("score1", -parseInt(document.getElementById("score1")?.textContent || "0", 10));
            adjustScore("score2", -parseInt(document.getElementById("score2")?.textContent || "0", 10));
        });

        // ë³¼ì¹´ìš´íŠ¸
        document.getElementById("btn-ball-minus")?.addEventListener("click", () => {
            if (ballCount > 0) {
                ballCount--;
                updateBallDisplay();
                send("ball", ballCount); // ë³€ê²½ ì‹œ ì „ì†¡
            }
        });
        document.getElementById("btn-ball-plus")?.addEventListener("click", () => {
            if (ballCount < 3) {
                ballCount++;
                updateBallDisplay();
                send("ball", ballCount); // ë³€ê²½ ì‹œ ì „ì†¡
            } else {
                ballCount = 4;
                handleWalk();
            }
        });

        document.getElementById("btn-strike-minus")?.addEventListener("click", () => {
            if (strikeCount > 0) {
                strikeCount--;
                updateStrikeDisplay();
                send("strike", strikeCount); // ë³€ê²½ ì‹œ ì „ì†¡
            }
        });
        document.getElementById("btn-strike-plus")?.addEventListener("click", () => {
            if (strikeCount < 2) {
                strikeCount++;
                updateStrikeDisplay();
                send("strike", strikeCount); // ë³€ê²½ ì‹œ ì „ì†¡
            } else {
                strikeCount = 3;
                handleStrikeOut();
            }
        });

        document.getElementById("btn-out-minus")?.addEventListener("click", () => {
            if (outCount > 0) {
                outCount--;
                updateOutDisplay();
                send("out", outCount); // ë³€ê²½ ì‹œ ì „ì†¡
            }
        });
        document.getElementById("btn-out-plus")?.addEventListener("click", () => {
            if (outCount < 2) {
                outCount++;
                resetCounts();
                updateOutDisplay();
                updateStrikeDisplay(); // ìŠ¤íŠ¸ë¼ì´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
                updateBallDisplay();   // ë³¼ í‘œì‹œ ì—…ë°ì´íŠ¸
                send("ball", ballCount); // ì¶”ê°€: ë³¼ ì¹´ìš´íŠ¸ 0 ì „ì†¡
                send("strike", strikeCount); // ì¶”ê°€: ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ 0 ì „ì†¡
                send("out", outCount); // ë³€ê²½ ì‹œ ì „ì†¡
            } else if (outCount === 2) {
                outCount = 3;
                resetCounts();
                checkThreeOuts();
                updateStrikeDisplay(); // ìŠ¤íŠ¸ë¼ì´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
                updateBallDisplay();   // ë³¼ í‘œì‹œ ì—…ë°ì´íŠ¸
            }
        });

        document.getElementById("reset-counts")?.addEventListener("click", () => {
            outCount = 0;
            resetCounts();
            updateBallDisplay();
            updateStrikeDisplay();
            updateOutDisplay();
            send("ball", ballCount);
            send("strike", strikeCount);
            send("out", outCount);
        });

        // ì´ë‹
        document.getElementById("btn-inning-minus")?.addEventListener("click", previousInning);
        document.getElementById("btn-inning-plus")?.addEventListener("click", () => changeInning());
        document.getElementById("reset-inning")?.addEventListener("click", () => {
            inningNum = 1;
            isTop = true;
            console.log("ì´ë‹ ë¦¬ì…‹ë¨: 1íšŒ ì´ˆ"); // ë¡œê·¸ ì¶”ê°€
            updateInningDisplay();
            send("inning", `${inningNum}íšŒ${isTop ? 'ì´ˆ' : 'ë§'}`);
        });

        // ì£¼ë£¨ìƒí™©
        document.getElementById("base1")?.addEventListener("change", (e) => updateBaseDisplay("base1", e.target.checked));
        document.getElementById("base2")?.addEventListener("change", (e) => updateBaseDisplay("base2", e.target.checked));
        document.getElementById("base3")?.addEventListener("change", (e) => updateBaseDisplay("base3", e.target.checked));
        document.getElementById("reset-bases")?.addEventListener("click", clearBases);

        // ì „ì²´ ë¦¬ì…‹ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById("reset-all")?.addEventListener("click", resetAll);

    }); // DOMContentLoaded ë
</script>
</body>
</html>
